@model List<GeneralValuationSubs.Models.GV13>


@*<partial name="_UpdateRevisedValueSuccess"></partial>*@

<html>
<head>
    <style>
        .column {
            float: left;
            width: 33.33%;
        }

        /* Clear floats after the columns */
        .row:after {
            content: "";
            display: table;
            clear: both;
        }

        .php-email-form {
            box-shadow: 0 0 30px rgb(214 215 216 / 60%);
            padding: 30px;
        }

        label {
            font-weight: bolder;
        }
    </style>
</head>

    @*<head>
        <style>
            .column {
              float: left;
              width: 33.33%;
            }

            /* Clear floats after the columns */
            .row:after {
              content: "";
              display: table;
              clear: both;
            }
        </style>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    </head>*@

    <body>

        <div class="container">

            <h2 style="text-align: center">General Valuation 2013 Task Approval </h2>

        </div>

    <form asp-controller="Home" asp-action="ApprovalGV13" asp-route-approval="Approved" method="POST">
            <section id="contact" class="contact">
             <div class="container">

                <div class="row justify-content-center aos-init aos-animate php-email-form" data-aos="fade-up" data-aos-delay="300">
                    <div class="col-xl-9 col-lg-12 mt-4">

                 @*<div class="row"> *@                
                    @{
                        if (Model != null)
                        {
                            foreach (var item in Model)
                            {
                                    <input hidden type="text" name="GV13ID" value="@item.GV13ID" />
                                    <input hidden type="text"  name="Comment" Value="@item.Comment" />

                                    <div class="row my-3">
                                        <div class="col-md-12 form-group">
                                            <label for="ObjectionNumber">Property Description</label>
                                            <input class="form-control" id="ObjectionNumber" name="Property_Description" Value="@item.Property_Description" disabled />
                                            <input hidden class="form-control" id="MarketValueComment" name="Property_Description" Value="@item.Property_Description" />
                                        </div>
                                    </div>

                                    <div class="row" style="display: flex; justify-content: space-between;">

                                        <div class="col-md-4">
                                            <span style="text-align: center; margin: 0;"></span>
                                        </div>
                                        <div class="col-md-4">
                                            <span style="text-align: center; margin: 0; color: black ; font-weight:bold;">MVD Outcome</span>
                                        </div>
                                        <div class="col-md-4">
                                            <span style="text-align: center; margin: 0; color: black ; font-weight:bold;">Valuation Board Appeal Decision</span>
                                        </div>

                                    </div>

                                <div class="row my-3">

                                        <div class="col-md-4 form-group">
                                            <label for="ObjectionNumber">Objection Number</label>
                                            <input class="form-control" id="ObjectionNumber" name="ObjectionNumber" Value="@item.ObjectionNumber" disabled />
                                            <input hidden class="form-control" id="MarketValueComment" name="ObjectionNumber" Value="@item.ObjectionNumber" />
                                        </div>

                                        <div class="col-md-4 mt-3 mt-md-0 form-group">
                                            <label for="ObjectionOutcomeValue">Outcome Value</label>
                                            <input class="form-control" id="MarketValue" name="ObjectionOutcomeValue" Value="@item.ObjectionOutcomeValue" disabled />
                                        </div>

                                        <div class="col-md-4 mt-3 mt-md-0 form-group">
                                            <label for="ObjectionOutcomeValue">Market Value</label>
                                            <input class="form-control" id="MarketValue" name="LIS_RV_MARKET_VALUE" Value="@item.LIS_RV_MARKET_VALUE" disabled />
                                            <input class="form-control" hidden id="LIS_RV_MARKET_VALUE" name="LIS_RV_MARKET_VALUE" Value="@item.LIS_RV_MARKET_VALUE" />
                                        </div>
                                </div>                                   
                                
                                    @*<h3>Draft Value</h3>*@

                                        <!--- Market Value --->

                                   <div class="row my-3">

                                        <div class="col-md-4 form-group">
                                            <label for="PremiseId">Premise Id</label>
                                            <input class="form-control" id="PremiseId" name="PremiseId" Value="@item.PREMISE_ID" disabled />
                                            <input class="form-control" hidden id="PremiseId" name="PremiseId" Value="@item.PREMISE_ID" />
                                        </div>

                                        <div class="col-md-4 form-group mt-3 mt-md-0">
                                            <label for="ObjectionOutcomeCategory">Outcome Category</label>
                                            <input class="form-control" id="MarketCategory" name="ObjectionOutcomeCategory" Value="@item.ObjectionOutcomeCategory" disabled />
                                        </div>

                                        <div class="col-md-4 mt-3 mt-md-0 form-group">
                                            <label for="ObjectionOutcomeValue">Category</label>
                                            <input class="form-control" id="MarketValue" name="CATDescription" Value="@item.LIS_RV_CATEGORY" disabled />
                                            <input class="form-control" hidden id="CATDescription" name="CATDescription" Value="@item.LIS_RV_CATEGORY" />
                                        </div>
                                   </div>

                                   <div class="row my-3">
                                    <!--- Status --->
                                        <div class="col-md-4 form-group">
                                            <label for="TownNameDesc">Town Name Description</label>
                                            <input class="form-control" id="TownNameDesc" name="TownNameDesc" Value="@item.TOWN_NAME_DESC" disabled />
                                        </div>

                                        <div class="col-md-4 form-group mt-3 mt-md-0">
                                            <label for="ObjectionOutcomeExtent">Outcome Extent</label>
                                            <input class="form-control" id="Extent" name="ObjectionOutcomeExtent" Value="@item.ObjectionOutcomeExtent" disabled />
                                        </div>

                                        <div class="col-md-4 form-group mt-3 mt-md-0">
                                            <label for="ObjectionOutcomeExtent">Extent</label>
                                            <input class="form-control" id="Extent" maxlength="10" name="LISExtent" Value="@item.LIS_RV_EXTENT" disabled />
                                        </div>                                         

                                   <div class="my-3"></div>
                                         
                                   </div>                                

                                
                                <div class="row"></div>
                               
                                //<div class="column" style="padding: 2px;">
                                //   <div style="border: solid grey; padding: 20px; border-radius: 25px;">
                                //        <h3>Revised Value</h3>

                                //            <!--- Market Value --->
                                //        <label for="RevisedMarketValue">Revised MakertValue</label>
                                //        <input class="form-control" id="RevisedMarketValue" name="RevisedMarketValue" Value="@item.RevisedMarketValue" disabled/>
                                //        <input hidden class="form-control" id="RevisedMarketValue" name="RevisedMarketValue" Value="@item.RevisedMarketValue"/>

                                //        <!--- Market Category --->  

                                //        <label for="RevisedCategory"> Revised Category </label>
                                //        <input class="form-control" id="RevisedCategory" name="RevisedCategory" Value="@item.RevisedCategory" disabled/>
                                //        <input hidden class="form-control" id="RevisedCategory" name="RevisedCategory" Value="@item.RevisedCategory"/>
                                //    </div>
                                //</div>

                                <div class="row"></div>

                                //<div class="column" style="padding: 2px;">
                                //    <div style="border: solid grey; padding: 20px; border-radius: 25px;">
                                //        <h3>Comment</h3>

                                //            <!--- Market Value --->
                                //        <label for="MarketValueComment">Comment</label>
                                //        <input class="form-control" id="MarketValueComment" name="Comment" Value="@item.Comment" disabled/>
                                //        <input hidden class="form-control" id="MarketValueComment" name="Comment" Value="@item.Comment" />

                                //        <!--- Market Category --->  

                                //        <label for="CategoryComment">Category Comment</label>
                                //           <input class="form-control" id="CategoryComment" name="CategoryComment" Value="@item.CommentCategory" disabled/>
                                //                       <input hidden class="form-control" id="CategoryComment" name="CategoryComment" Value="@item.CommentCategory"/>
                                //    </div>
                                //</div>
                                //<br />

                                    <div class="row my-3">
                                        <div class="form-group mt-3">
                                            <label for="Comment">Comment</label>
                                            <textarea class="form-control" maxlength="250" id="approverComment" onchange="myFunction(this.value)" name="approverComment" placeholder="Comment"></textarea>
                                        </div>
                                    </div>

                                //<div>
                                //    <a class="btn btn-primary" asp-controller="Home" asp-action="DownloadFiles" asp-route-PremiseID="@item.PremiseId">Download File</a>
                                //</div>                                
                                                                  
                            }
                        }
                    }

                   @*<br />
                    <br />
                    <br />*@     
                    
                            <div class="row">
                                <div style="margin-top: 5%; display: flex; justify-content: center;" id="approve-reject">
                                <a style="width:111px;height:44px;border-radius: 50px;padding: 10px 24px; background-color: #025752; color: white" class="btn" data-bs-target="#approveModal" data-bs-toggle="modal">Approve</a> &nbsp;
                                <a style="width:102px;height:44px;border-radius: 50px;padding: 10px 24px; background-color: red; color: white" class="btn" data-bs-target="#rejectModal" data-bs-toggle="modal">Reject</a> &nbsp;
                                <a type="button" class="btn btn-secondary" style="width:102px;height:44px;border-radius: 50px;padding: 10px 24px"
                                   asp-controller="Home" asp-action="ApprovalListGV13" class=" text-dark">
                                    Back</>
                                </a>
                            </div>
                            </div>
                    </div>
                 </div>
                </div>
                </div>

                </div>
        </section>
        <!-- Approve Modal -->
          <div class="m-4">
            <div id="approveModal" class="modal fade" data-bs-backdrop="static" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Confirmation</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <p>Do you want to approve this task?</p>
                            @*<p class="text-secondary"><small>If you don't save, your changes will be lost.</small></p>*@
                        </div>
                        <div class="modal-footer" style="display: flex; justify-content: center;">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn" style="background-color: #E6B000;">Proceed</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
         </div><!-- Button trigger modal -->

        </form>

    <form asp-controller="Home" asp-action="ApprovalGV13" asp-route-approval="Rejected" method="POST">
            @{
                if (Model != null)
                {
                    foreach (var item in Model)
                    {
                                <input hidden type="text" name="GV13ID" value="@item.GV13ID" />
                                <input hidden type="text" name="Comment" Value="@item.Comment" />
                                <input hidden class="form-control" id="MarketValueComment" name="Property_Description" Value="@item.Property_Description" />
                                <input hidden class="form-control" id="MarketValueComment" name="LIS_RV_MARKET_VALUE" Value="@item.LIS_RV_MARKET_VALUE" />
                                <input hidden class="form-control" id="MarketValueComment" name="CATDescription" Value="@item.LIS_RV_CATEGORY" />

                                <div hidden class="row">
                        
                                    <div class="col-lg-6" style="margin-bottom: 2%;">
                                        <label for="PremiseId">Premise Id</label>
                                        <input class="form-control" id="PremiseId" name="PremiseId" Value="@item.PREMISE_ID" disabled/>
                                        <input hidden class="form-control" id="MarketValueComment" name="PremiseId" Value="@item.PREMISE_ID" />
                                    </div>                                    
                                </div>


                                <div hidden class="column" style="padding: 2px;">
                                
                                <div style="border: solid grey; padding: 20px; border-radius: 25px;">
                                    <!--- Status --->  
                                    <label for="Status"> status </label>
                                    <input class="form-control" id="Status" name="Status" Value="@item.Status" disabled/>
                                    </div>
                                </div>    
                                
                                <div class="row"></div>
                               
                                @*<div hidden class="column" style="padding: 2px;">
                                   <div style="border: solid grey; padding: 20px; border-radius: 25px;">
                                        <h3>Revised Value</h3>

                                            <!--- Market Value --->
                                        <label for="RevisedMarketValue">Revised MakertValue</label>
                                        <input class="form-control" id="RevisedMarketValue" name="RevisedMarketValue2" onchange="revisedMarketValue(this.value)" Value="@item.RevisedMarketValue" disabled/>
                                        <input class="form-control" id="RevisedMarketValue" name="RevisedMarketValue" Value="@item.RevisedMarketValue"/>

                                        <!--- Market Category --->  

                                        <label for="RevisedCategory"> Revised Category </label>
                                                    <input class="form-control" id="RevisedCategory" name="RevisedCategory2" onchange="revisedCategory(this.value)" Value="@item.RevisedCategory" disabled/>
                                        <input class="form-control" id="RevisedCategory" name="RevisedCategory" Value="@item.RevisedCategory"/>
                                    </div>
                                </div>*@

                                @*<div class="row"></div>

                                            <div hidden class="column" style="padding: 2px;">
                                    <div style="border: solid grey; padding: 20px; border-radius: 25px;">
                                        <h3>Comment</h3>

                                            <!--- Market Value --->
                                        <label for="MarketValueComment">MakertValue Comment</label>
                                        <input class="form-control" id="MarketValueComment" name="MarketValueComment2" Value="@item.CommentMarketValue" disabled/>
                                        <input class="form-control" id="MarketValueComment" name="MarketValueComment" onchange="MarketValueComment(this.value)" Value="@item.CommentMarketValue"/>


                                        <!--- Market Category --->  

                                        <label for="CategoryComment">Category Comment</label>
                                           <input class="form-control" id="CategoryComment" name="CategoryComment" onchange="CategoryComment(this.value)" Value="@item.CommentCategory" disabled/>
                                           <input class="form-control" id="CategoryComment" name="CategoryComment" Value="@item.CommentCategory"/>
                                    </div>
                                </div>
                                            <div class="row"></div>*@


                            }
                        }
                    }

                    <br />
                    <br />
                    <br />

        <div hidden class="row">
            <div class="col=lg-6">
                <label for="approverComment">Comment:</label>
                <textarea class="form-control" maxlength="250" onchange="myFunction(this.value)" id="approverComment2" name="approverComment"></textarea>
            </div>                   
        </div>
           <!-- Reject Modal -->
          <div class="m-4">
            <div id="rejectModal" class="modal fade" data-bs-backdrop="static" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Confirmation</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <p>Do you want to reject this task?</p>
                            @*<p class="text-secondary"><small>If you don't save, your changes will be lost.</small></p>*@
                        </div>
                        <div class="modal-footer" style="display: flex; justify-content: center;">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn" style="background-color: #E6B000;">Proceed</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
         </div><!-- Button trigger modal -->

</form>


   
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script type="text/javascript">
            function onlyNumberKey(evt) {    
                // Only ASCII character in that range allowed
                var ASCIICode = (evt.which) ? evt.which : evt.keyCode
                if (ASCIICode > 31 && (ASCIICode < 48 || ASCIICode > 57))
                    return false;
                return true;
            }

            // Jquery Dependency                                 
            $("input[data-type='currency']").on({
              keyup: function() {
              formatCurrency($(this));
               },
              blur: function() {
              formatCurrency($(this), "blur");
              }
            });

            function formatNumber(n) {
              // format number 1000000 to 1,234,567
            return n.replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ",")
                                } 
            function formatCurrency(input, blur) {
                // appends $ to value, validates decimal side
                // and puts cursor back in right position.                                     // get input value
             var input_val = input.val();                                     // don't validate empty input
             if (input_val === "") { return; }                                     // original length
             var original_len = input_val.length;                                     // initial caret position
             var caret_pos = input.prop("selectionStart");                                     // check for decimal
             if (input_val.indexOf(".") >= 0) {                                         // get position of first decimal
              // this prevents multiple decimals from
              // being entered
              var decimal_pos = input_val.indexOf(".");                                         // split number by decimal point
              var left_side = input_val.substring(0, decimal_pos);
              var right_side = input_val.substring(decimal_pos);                                         // add commas to left side of number
              left_side = formatNumber(left_side);                                         // validate right side
              right_side = formatNumber(right_side);                                        // On blur make sure 2 numbers after decimal
               if (blur === "blur") {
               right_side += "00";
                }                                         // Limit decimal to only 2 digits
               right_side = right_side.substring(0, 2);                                         // join number by .
               input_val = "R " + left_side + "." + right_side;
                }
                else {
                    // no decimal entered
                    // add commas to number
                    // remove all non-digits
                   input_val = formatNumber(input_val);
                   input_val = "R " + input_val;                                         // final formatting
                   if (blur === "blur") {
                     input_val += ".00";
                       }
                    }                                     // send updated string to input
                    input.val(input_val);                                     // put caret back in the right position
                    var updated_len = input_val.length;
                    caret_pos = updated_len - original_len + caret_pos;
                    input[0].setSelectionRange(caret_pos, caret_pos);
                }
        </script>

        <script>
            function myFunction(val) {
	            document.getElementById("approverComment2").value=val;  	          
            }
            function revisedMarketValue(val) {
	            document.getElementById("RevisedMarketValue").value=val;  	          
            }
            function revisedCategory(val) {
	            document.getElementById("RevisedCategory").value=val;  	          
            }
            
            function MarketValueComment(val) {
	            document.getElementById("MarketValueComment").value=val;  	          
            }

            function CategoryComment(val) {
	            document.getElementById("CategoryComment").value=val;  	          
            }
        </script>

    <script>
        const textarea1 = document.getElementById('approverComment');

        const preventEnterKey = function (textarea) 
        {
            textarea.addEventListener('keydown', function (event) 
            {
                if (event.key === 'Enter') {
                    event.preventDefault();
                }
            });
        };

        preventEnterKey(textarea1);
    </script>

    </body>
</html>